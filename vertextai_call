import requests
import json
import base64

def encode_image_to_base64(image_path):
    # Read the image file in binary mode
    with open(image_path, "rb") as image_file:
        # Encode the binary data to base64
        encoded_string = base64.b64encode(image_file.read())
        # Optionally decode to a string if needed for JSON or other purposes
        encoded_string = encoded_string.decode('utf-8')
        return encoded_string


text_input = ["what is the text on the bottle and what is name of brand?"]

image_path = "/content/1.jpg"

encoded_image = encode_image_to_base64(image_path)

payload = json.dumps({"text_input": text_input, "image_input": [encoded_image]})

payload

url = 'https://asia-south1-indigo-bazaar-420408.cloudfunctions.net/openvertex_tesrun'
headers = {'Content-Type': 'application/json'}

response = requests.post(url, data=payload, headers=headers)
print(response.text)
